function IsValidGuid(a){var b=!1;return $.ajax({url:GetPasApiUrl()+"isvalidguid",type:"POST",data:JSON.stringify({Guid:a}),contentType:"application/json",dataType:"json",async:!1,success:function(a){a&&"true"==a&&(b=!0)},error:function(a){void 0!==a.responseText?console.log(a.responseText):console.log(a)}}),b}function IsNewUser(a){var b={Host:GetCorrectHostName(),Email:a},c=!1;return $.ajax({url:GetPasApiUrl()+"isnewuser",type:"POST",data:JSON.stringify(b),contentType:"application/json",dataType:"json",async:!1,success:function(a){a&&"true"==a&&(c=!0)},error:function(a){void 0!==a.responseText?console.log(a.responseText):console.log(a)}}),c}function InitUserData(){var a=eBizCookies.get(eBizData.GuidCookieName);void 0===a||null==a||0==a.length?eBizCookies.set(eBizData.GuidCookieName,eBizData.User.Guid,{expires:eBizData.CookieExpireDays}):eBizCookies.set(eBizData.GuidCookieName,a,{expires:eBizData.CookieExpireDays}),ApplyLogedInContent(),ApplyVehiclesCounters(),FillViewedVehicles(),FillSavedVehicles(),FillAlertedVehicles()}function InitStatistics(){ApplyVehicleStatistics()}function LogInUser(a,b,c,d){MakeAjaxRequest("loginuser",{Guid:eBizCookies.get(eBizData.GuidCookieName),Host:GetCorrectHostName(),FirstName:a,LastName:b,Email:c,Phone:d},InitUserData)}function LogOutUser(){var a=eBizCookies.get(eBizData.GuidCookieName);eBizCookies.remove(eBizData.GuidCookieName),MakeAjaxRequest("logoutuser",{Guid:a,Host:GetCorrectHostName()},InitUserData)}function UnsubscribeUser(){var a=eBizCookies.get(eBizData.GuidCookieName);eBizCookies.remove(eBizData.GuidCookieName),MakeAjaxRequest("unsubscribeuser",{Guid:a,Host:GetCorrectHostName()},InitUserData)}function SendConfirmation(){MakeAjaxRequest("sendconfirmation",{Guid:eBizCookies.get(eBizData.GuidCookieName),Host:GetCorrectHostName()})}function AddViewedVehicle(a,b){void 0!==b&&null!=b&&0!=b.length||(b=location.href);var c={VinNumber:a,DetailsUrl:b};MakeAjaxRequest("addviewedvehicle",{Guid:eBizCookies.get(eBizData.GuidCookieName),Host:GetCorrectHostName(),ViewedVehicle:c},InitUserData),setTimeout(function(){GetVehicleStatistics(a)},500)}function RemoveViewedVehicles(a){if(void 0===a&&(a="Clear all Recently Viewed?"),confirm(a)){MakeAjaxRequest("removeviewedvehicles",{Guid:eBizCookies.get(eBizData.GuidCookieName),Host:GetCorrectHostName()},InitUserData)}}function AddSavedVehicle(a,b){void 0!==b&&null!=b&&0!=b.length||(b=location.href);var c={VinNumber:a,DetailsUrl:b};MakeAjaxRequest("addsavedvehicle",{Guid:eBizCookies.get(eBizData.GuidCookieName),Host:GetCorrectHostName(),SavedVehicle:c},InitUserData),setTimeout(function(){GetVehicleStatistics(a)},500)}function RemoveSavedVehicle(a){if(void 0!==a&&null!=a&&0!=a.length){MakeAjaxRequest("removesavedvehicle",{Guid:eBizCookies.get(eBizData.GuidCookieName),Host:GetCorrectHostName(),VinNumber:a},InitUserData)}}function RemoveSavedVehicles(a){if(void 0===a&&(a="Clear all Saved Vehicles?"),confirm(a)){var b={Guid:eBizCookies.get(eBizData.GuidCookieName),Host:GetCorrectHostName()};eBizData.RemovedSavedVehiclesVins=[];for(var c=0;c<eBizData.User.SavedVehicles.length;c++)eBizData.RemovedSavedVehiclesVins.push(eBizData.User.SavedVehicles[c].VinNumber);MakeAjaxRequest("removesavedvehicles",b,InitUserData)}}function RemoveAlertedVehicle(a){if(void 0!==a&&null!=a&&0!=a.length){MakeAjaxRequest("unsubscribesavedvehicle",{Guid:eBizCookies.get(eBizData.GuidCookieName),Host:GetCorrectHostName(),VinNumber:a},InitUserData)}}function RemoveAlertedVehicles(a){if(void 0===a&&(a="Clear all Price Alerts?"),confirm(a)){MakeAjaxRequest("unsubscribesavedvehicles",{Guid:eBizCookies.get(eBizData.GuidCookieName),Host:GetCorrectHostName()},InitUserData)}}function GetVehicleStatistics(a){GetVehicleStatisticsAjax("getvehiclestatistics",{Guid:eBizCookies.get(eBizData.GuidCookieName),Host:GetCorrectHostName(),VinNumber:a},InitStatistics)}function GetVehicleStatisticsAjax(a,b,c){$.ajax({url:GetPasApiUrl()+a,type:"POST",data:JSON.stringify(b),contentType:"application/json",dataType:"json",success:function(a){a&&void 0!==c&&(eBizData.VehicleStatistics.Views=a.ViewedCount,eBizData.VehicleStatistics.Saves=a.SavedCount,c())},error:function(a){void 0!==a.responseText?console.log(a.responseText):console.log(a)}})}function MakeAjaxRequest(a,b,c){$.ajax({url:GetPasApiUrl()+a,type:"POST",data:JSON.stringify(b),contentType:"application/json",dataType:"json",success:function(a){a&&void 0!==c&&(eBizData.User=a,c())},error:function(a){void 0!==a.responseText?console.log(a.responseText):console.log(a)}})}function GetBooleanValue(a){return null!=a&&void 0!=a&&0!=a.length&&"true"==a.toLowerCase()}function GetIntegerValue(a){if(null==a||void 0==a||0==a.length)return 0;var b=parseInt(a);return isNaN(b)?0:b}function GetDateTimeStringValue(a){return null==a||void 0==a||0==a.length?new Date(0):a}function GetPasApiUrl(){return _commonJSParams.PASLocation}function GetCorrectHostName(){var a=window.location.hostname;return 0==a.indexOf("www.")&&(a=a.substr(4,a.length-4)),a}function AddPasValidationFormRules(){$("#ctlFirstName").attr("required",!0),$("#ctlLastName").attr("required",!0)}function RemovePasValidationFormRules(){$("#ctlFirstName").removeAttr("required"),$("#ctlLastName").removeAttr("required"),$("#ctlFirstName").removeClass("error"),$("#ctlLastName").removeClass("error")}function IsValidPasEmail(a){return/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(a)}!function(a){if("function"==typeof define&&define.amd)define(a);else if("object"==typeof exports)module.exports=a();else{var b=window.Cookies,c=window.Cookies=a();c.noConflict=function(){return window.Cookies=b,c}}}(function(){function a(){for(var a=0,b={};a<arguments.length;a++){var c=arguments[a];for(var d in c)b[d]=c[d]}return b}function b(c){function d(b,e,f){var g;if(arguments.length>1){if(f=a({path:"/"},d.defaults,f),"number"==typeof f.expires){var h=new Date;h.setMilliseconds(h.getMilliseconds()+864e5*f.expires),f.expires=h}try{g=JSON.stringify(e),/^[\{\[]/.test(g)&&(e=g)}catch(o){}return e=c.write?c.write(e,b):encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),b=encodeURIComponent(String(b)),b=b.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),b=b.replace(/[\(\)]/g,escape),document.cookie=[b,"=",e,f.expires&&"; expires="+f.expires.toUTCString(),f.path&&"; path="+f.path,f.domain&&"; domain="+f.domain,f.secure?"; secure":""].join("")}b||(g={});for(var i=document.cookie?document.cookie.split("; "):[],j=/(%[0-9A-Z]{2})+/g,k=0;k<i.length;k++){var l=i[k].split("="),m=l[0].replace(j,decodeURIComponent),n=l.slice(1).join("=");'"'===n.charAt(0)&&(n=n.slice(1,-1));try{if(n=c.read?c.read(n,m):c(n,m)||n.replace(j,decodeURIComponent),this.json)try{n=JSON.parse(n)}catch(o){}if(b===m){g=n;break}b||(g[m]=n)}catch(o){}}return g}return d.get=d.set=d,d.getJSON=function(){return d.apply({json:!0},[].slice.call(arguments))},d.defaults={},d.remove=function(b,c){d(b,"",a(c,{expires:-1}))},d.withConverter=b,d}return b(function(){})});var eBizCookies=Cookies.noConflict(),eBizData={GuidCookieName:"EBizAutosCookieUserGuid",CookieExpireDays:30,User:null,VehicleStatistics:{Views:0,Saves:0},RemovedSavedVehiclesVins:[],IncorrectRequestMessage:"incorrect request"};$(document).ready(function(){var a=eBizCookies.get(eBizData.GuidCookieName),b=QueryString.guid,c={};void 0===a||IsValidGuid(a)||eBizCookies.remove(eBizData.GuidCookieName),void 0!=b&&IsValidGuid(b)&&a!=b?(eBizCookies.set(eBizData.GuidCookieName,b,{expires:eBizData.CookieExpireDays}),c.Guid=b,c.SecondaryGuid=a,c.Host=GetCorrectHostName(),MakeAjaxRequest("synchronizeusersdata",c,InitUserData)):(c.Guid=a,c.Host=GetCorrectHostName(),MakeAjaxRequest("getuserdata",c,InitUserData))});var QueryString=function(){for(var a={},b=window.location.search.substring(1),c=b.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(void 0===a[e[0].toLowerCase()])a[e[0].toLowerCase()]=decodeURIComponent(e[1]);else if("string"==typeof a[e[0].toLowerCase()]){var f=[a[e[0].toLowerCase()],decodeURIComponent(e[1])];a[e[0].toLowerCase()]=f}else a[e[0].toLowerCase()].push(decodeURIComponent(e[1]))}return a}();